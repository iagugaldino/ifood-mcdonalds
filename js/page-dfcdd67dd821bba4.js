(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[42,338],{6337:function(e,t,r){Promise.resolve().then(r.bind(r,2579))},2579:function(e,t,r){"use strict";r.d(t,{default:function(){return C}});var a=r(7437),i=r(2265),n=r(9376),o=r(4196),s=r(3030),l=r(2864),c=r(3313),d=r(5523),u=r(2660),m=r(8997),f=r(3247),h=r(407),g=r(5863),p=r(5302),x=r(4941),y=r(7164),v=r(3795);let w=new Map;function C(e){let{initialRestaurant:t,initialProducts:C=[],initialMenus:S=[],slug:j}=e,N=(0,n.useRouter)(),[b,I]=(0,i.useState)(t),[O,k]=(0,i.useState)(C),[E,F]=(0,i.useState)(S),[T,A]=(0,i.useState)([]),[R,P]=(0,i.useState)(null),[W,D]=(0,i.useState)(null),[_,L]=(0,i.useState)([]),[z,M]=(0,i.useState)(!1),[q,J]=(0,i.useState)(!t),[Z,B]=(0,i.useState)(0===C.length),[V,U]=(0,i.useState)(""),{location:H}=function(){let[e,t]=(0,i.useState)(null),[r,a]=(0,i.useState)(!0),[n,o]=(0,i.useState)(null),s=(0,i.useCallback)(async()=>{try{let e=new AbortController,r=setTimeout(()=>e.abort(),1e3),i=await fetch("https://ipapi.co/json/",{signal:e.signal});clearTimeout(r);let n=await i.json();if(n.city&&n.region_code){let e={city:n.city,state:n.region_code};t(e),localStorage.setItem("detectedLocation",JSON.stringify(e)),a(!1)}else a(!1)}catch(e){a(!1)}},[]);return(0,i.useEffect)(()=>{let e=localStorage.getItem("detectedLocation");if(e)try{let r=JSON.parse(e);t(r),a(!1)}catch(e){}navigator.geolocation?navigator.geolocation.getCurrentPosition(async e=>{try{let r=await fetch("https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=".concat(e.coords.latitude,"&longitude=").concat(e.coords.longitude,"&localityLanguage=pt"),{signal:AbortSignal.timeout(5e3)}),i=await r.json();if(i.city&&i.principalSubdivisionCode){let e={city:i.city,state:i.principalSubdivisionCode.replace("BR-","")};t(e),localStorage.setItem("detectedLocation",JSON.stringify(e)),a(!1);return}}catch(e){console.error("Error getting location from GPS:",e)}s()},e=>{console.log("GPS not available or denied, using IP fallback",e),s()},{timeout:8e3,maximumAge:3e5,enableHighAccuracy:!0}):s()},[s]),{location:e,loading:r,error:n}}(),[K,Y]=(0,i.useState)(!1),[Q,G]=(0,i.useState)(null),[$,X]=(0,i.useState)(null),[ee,et]=(0,i.useState)(180),[er,ea]=(0,i.useState)(!1),[ei,en]=(0,i.useState)(!1),[eo,es]=(0,i.useState)(!1),[el,ec]=(0,i.useState)(!0),[ed,eu]=(0,i.useState)(!1),[em,ef]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=new URLSearchParams(window.location.search);"true"===e.get("preview")&&ef({name:e.get("name")||void 0,description:e.get("description")||void 0,coverImage:e.get("coverImage")||void 0,profileImage:e.get("profileImage")||void 0,city:e.get("city")||void 0})},[]),(0,i.useEffect)(()=>{if(S.length>0){let e=[...S].sort((e,t)=>void 0!==e.order&&void 0!==t.order?(e.order||0)-(t.order||0):new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime());F(e);let t=e.find(e=>e.active)||e[0];t&&(P(t.id),D(t.name))}S.length>0&&C.length>0&&(A([...S].sort((e,t)=>void 0!==e.order&&void 0!==t.order?(e.order||0)-(t.order||0):new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()).map(e=>{let t=(e.productIds||[]).map(e=>C.find(t=>t.id===e)).filter(Boolean);return{menuId:e.id,menuName:e.name,products:t}}).filter(e=>e.products.length>0)),B(!1))},[S,C]),(0,i.useEffect)(()=>{if(b&&b.slug===j)try{let{safeSetRestaurant:e}=r(6338);e(b)}catch(e){}},[b,j]),(0,i.useEffect)(()=>{(null==b?void 0:b.id)&&(!(C.length>0)||!(S.length>0))&&(async()=>{B(!0);try{let e=b.id,t=function(e){try{let t=w.get(e);if(t&&Date.now()-t.timestamp<6e4){if(void 0!==t.version&&t.version<2)return w.delete(e),localStorage.removeItem("cache_".concat(e)),null;return t}let r=localStorage.getItem("cache_".concat(e));if(r){let t=JSON.parse(r);if(Date.now()-t.timestamp<6e4){if(void 0!==t.version&&t.version<2)return localStorage.removeItem("cache_".concat(e)),null;return w.set(e,t),t}}}catch(e){}return null}(e);if(t&&(k(t.products),B(!1),t.menusData&&Array.isArray(t.menusData)&&t.menusData.length>0)){let e=t.menusData.sort((e,t)=>void 0!==e.order&&void 0!==t.order?(e.order||0)-(t.order||0):new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime());F(e.map(e=>({id:e.id,restaurantId:e.restaurantId,name:e.name,description:e.description,productIds:(e.menuProducts||[]).sort((e,t)=>{var r,a;return(null!==(r=e.order)&&void 0!==r?r:0)-(null!==(a=t.order)&&void 0!==a?a:0)}).map(e=>e.productId).filter(Boolean)||[],active:e.active,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)})));let r=e.map(e=>{let r=(e.menuProducts||[]).sort((e,t)=>{var r,a;return(null!==(r=e.order)&&void 0!==r?r:0)-(null!==(a=t.order)&&void 0!==a?a:0)}).map(e=>e.productId).filter(Boolean).map(e=>t.products.find(t=>t.id===e)).filter(Boolean);return{menuId:e.id,menuName:e.name,products:r}}).filter(e=>e.products.length>0);A(r);let a=e.find(e=>e.active)||e[0];a&&(P(a.id),D(a.name))}Promise.all([fetch("/api/menus?restaurantId=".concat(b.id)).then(e=>e.ok?e.json():null).catch(()=>null),fetch("/api/products?restaurantId=".concat(b.id)).then(e=>e.ok?e.json():null).catch(()=>null)]).then(e=>{let[t,r]=e;if(t&&Array.isArray(t)&&t.length>0){let e=t.sort((e,t)=>void 0!==e.order&&void 0!==t.order?(e.order||0)-(t.order||0):new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime());if(F(e.map(e=>({id:e.id,restaurantId:e.restaurantId,name:e.name,description:e.description,productIds:(e.menuProducts||[]).sort((e,t)=>{var r,a;return(null!==(r=e.order)&&void 0!==r?r:0)-(null!==(a=t.order)&&void 0!==a?a:0)}).map(e=>e.productId).filter(Boolean)||[],active:e.active,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}))),r&&Array.isArray(r)){let t=e.map(e=>{let t=(e.menuProducts||[]).sort((e,t)=>{var r,a;return(null!==(r=e.order)&&void 0!==r?r:0)-(null!==(a=t.order)&&void 0!==a?a:0)}).map(e=>e.productId).filter(Boolean).map(e=>r.find(t=>t.id===e)).filter(Boolean);return{menuId:e.id,menuName:e.name,products:t}}).filter(e=>e.products.length>0);A(t);let a=[];t.forEach(e=>{a.push(...e.products)}),k(a)}let a=e.find(e=>e.active)||e[0];a&&(P(a.id),D(a.name))}if(B(!1),r&&Array.isArray(r)&&r.length>0){let e=t?[...t].map(e=>({...e,menuProducts:(e.menuProducts||[]).map((e,t)=>({...e,order:void 0!==e.order?e.order:t}))})).sort((e,t)=>void 0!==e.order&&void 0!==t.order?(e.order||0)-(t.order||0):new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()):null;!function(e,t){try{w.set(e,t);let r=JSON.stringify(t);r.length<512e3&&localStorage.setItem("cache_".concat(e),r)}catch(e){if(e instanceof Error&&"QuotaExceededError"===e.name)try{Object.keys(localStorage).forEach(e=>{if(e.startsWith("cache_"))try{let t=localStorage.getItem(e);if(t){let r=JSON.parse(t);Date.now()-r.timestamp>6e4&&localStorage.removeItem(e)}}catch(t){localStorage.removeItem(e)}})}catch(e){}}}(b.id,{products:r,menusData:e,timestamp:Date.now(),version:2})}}).catch(e=>{console.error("Error loading products:",e),B(!1)})}catch(e){console.error("Error loading products:",e),B(!1)}})()},[null==b?void 0:b.id,C.length,S.length]),(0,i.useEffect)(()=>{if(null==b?void 0:b.id){let{loadCartFromStorage:e,expandCartItem:t}=r(6414),a=e("cart_".concat(b.id));a.length>0&&L(a.map(e=>t(e)))}},[null==b?void 0:b.id]),(0,i.useEffect)(()=>{let e=localStorage.getItem("deliveryAddress");if(e)try{let t=JSON.parse(e);t.city?U(t.city):t.neighborhood&&U(t.neighborhood)}catch(e){}(null==H?void 0:H.city)&&U(e=>e||H.city)},[null==H?void 0:H.city]),(0,i.useEffect)(()=>{if(!(null==b?void 0:b.id))return;let e=localStorage.getItem("isLoggedIn"),t=localStorage.getItem("currentUser");if("true"===e&&t)try{let e=JSON.parse(t);e.id&&"unknown"!==e.id&&"temp-admin"!==e.id&&fetch("/api/users/last-restaurant",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id,restaurantId:b.id})}).catch(()=>{})}catch(e){}},[null==b?void 0:b.id]),(0,i.useEffect)(()=>{(null==b?void 0:b.id)&&(0,y.Z0)(b.id,"/".concat(j))},[null==b?void 0:b.id,j]),(0,i.useEffect)(()=>{try{let e=Object.keys(localStorage),t=Date.now();e.forEach(e=>{if(e.startsWith("cache_"))try{let r=localStorage.getItem(e);if(r){let a=JSON.parse(r);t-a.timestamp>6e5&&localStorage.removeItem(e)}}catch(t){localStorage.removeItem(e)}})}catch(e){}},[]),(0,i.useEffect)(()=>{let e=()=>{ea(!0),setTimeout(()=>ea(!1),4e3)},t=()=>{ea(!0),setTimeout(()=>ea(!1),4e3)};return window.addEventListener("showLimitWarning",e),window.addEventListener("cartLimitExceeded",t),()=>{window.removeEventListener("showLimitWarning",e),window.removeEventListener("cartLimitExceeded",t)}},[]),(0,i.useEffect)(()=>{let e=async()=>{let e=localStorage.getItem("currentOrderId");if(!e){X(null);return}try{let t=await fetch("/api/orders?id=".concat(e));if(t.ok){let e=await t.json();if("pix"===e.paymentMethod&&"pending"===e.status){let t=new Date(e.createdAt).getTime(),r=Date.now(),a=Math.max(0,180-Math.floor((r-t)/1e3));a>0?(X({id:e.id,number:e.orderNumber,createdAt:e.createdAt}),et(a)):(localStorage.removeItem("currentOrderId"),localStorage.removeItem("currentOrderNumber"),X(null))}else X(null)}}catch(e){console.error("Error checking pending order:",e),X(null)}};e();let t=setInterval(e,5e3);return()=>clearInterval(t)},[]),(0,i.useEffect)(()=>{if(!$||ee<=0)return;let e=setInterval(()=>{et(e=>e<=1?(localStorage.removeItem("currentOrderId"),localStorage.removeItem("currentOrderNumber"),X(null),0):e-1)},1e3);return()=>clearInterval(e)},[$,ee]),(0,i.useEffect)(()=>{if(0===T.length)return;let e=()=>{let e=document.querySelector("[data-restaurant-info]"),t=document.querySelector("[data-carousel-menu]"),r=document.querySelector("header");if(!e||!t||!r){console.log("❌ Elementos n\xe3o encontrados");return}let a=r.getBoundingClientRect().height,i=t.getBoundingClientRect(),n=window.scrollY,o=i.top<=a;console.log("\uD83D\uDCCA STICKY LOG:",{scrollY:Math.round(n),headerHeight:Math.round(a),carouselTop:Math.round(i.top),shouldStick:o,currentPosition:window.getComputedStyle(t).position,currentTop:window.getComputedStyle(t).top,isCarouselSticky:ed}),o!==ed&&(console.log("\uD83D\uDD04 Mudando estado: ".concat(ed," → ").concat(o)),eu(o)),o?(console.log("✅ APLICANDO STICKY"),t.style.setProperty("position","sticky","important"),t.style.setProperty("top","".concat(a,"px"),"important"),t.style.setProperty("z-index","30","important"),t.style.setProperty("background-color","white","important"),t.style.setProperty("box-shadow","0 2px 4px rgba(0,0,0,0.1)","important")):n<=a+50&&(console.log("❌ REMOVENDO STICKY"),t.style.setProperty("position","relative","important"),t.style.removeProperty("top"),t.style.removeProperty("z-index"),t.style.removeProperty("background-color"),t.style.removeProperty("box-shadow"));let s=T.map(e=>{let t=document.querySelector('[data-menu-section="'.concat(e.menuId,'"]'));if(!t)return null;let r=t.getBoundingClientRect();return{menuId:e.menuId,menuName:e.menuName,top:r.top,bottom:r.bottom,height:r.height}}).filter(Boolean);if(0===s.length)return;let l=(o?a:0)+80,c=s[0],d=1/0;for(let e of s)if(e.top<=l+150&&e.bottom>=l-50){let t=Math.abs(e.top-l);t<d&&(d=t,c=e)}if(d===1/0){let e=s.filter(e=>e.top<l);e.length>0&&(c=e[e.length-1])}c.menuId!==R&&(P(c.menuId),D(c.menuName))};return window.addEventListener("scroll",e,{passive:!0}),e(),()=>window.removeEventListener("scroll",e)},[T,R,ed]),(0,i.useEffect)(()=>{if(!j)return;let e="locationConfirmed_".concat(j);if("true"===localStorage.getItem(e))return;let t=localStorage.getItem("deliveryAddress"),r=null;if(t)try{let e=JSON.parse(t);r=e.city||e.neighborhood}catch(e){}if(r){U(r),Y(!0),G(null);return}if(null==H?void 0:H.loading){let e=setTimeout(()=>{(null==H?void 0:H.city)&&U(H.city),Y(!0),G(null)},200);return()=>clearTimeout(e)}let a=V||(null==H?void 0:H.city);a?(U(a),Y(!0),G(null)):H&&!H.loading&&(Y(!0),G(null))},[j,V,H]),(0,i.useEffect)(()=>{(async()=>{if(!(null==b?void 0:b.id)){ec(!1);return}try{let e=await fetch("/api/payment-settings?restaurantId=".concat(b.id));if(e.ok){let t=await e.json();es(!0===t.gatewayEnabled&&("skalepay"===t.gatewayProvider||"vennoxpay"===t.gatewayProvider))}}catch(e){console.error("Erro ao verificar configura\xe7\xf5es de pagamento:",e)}finally{ec(!1)}})()},[null==b?void 0:b.id]);let eh=e=>{L(t=>{let a=t.find(t=>t.product.id===e.id)?t.map(t=>t.product.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{product:e,quantity:1}];if(b&&Promise.resolve().then(r.bind(r,6414)).then(e=>{let{saveCartToStorage:t}=e,r="cart_".concat(b.id);try{localStorage.setItem("currentCartKey",r)}catch(e){}t(r,a)}),null==b?void 0:b.id){let t=a.reduce((e,t)=>e+(0,v.Mc)(t),0);(0,y.Kc)(b.id,e.id,e.name,a.length,t)}return setTimeout(()=>{window.dispatchEvent(new CustomEvent("cartItemAdded"))},0),a})},eg=e=>{L(t=>{let a=t.find(t=>t.product.id===e),i=a&&a.quantity>1?t.map(t=>t.product.id===e?{...t,quantity:t.quantity-1}:t):t.filter(t=>t.product.id!==e);return b&&Promise.resolve().then(r.bind(r,6414)).then(e=>{let{saveCartToStorage:t}=e;t("cart_".concat(b.id),i)}),i})},ep=e=>{let t=_.find(t=>t.product.id===e);return(null==t?void 0:t.quantity)||0},ex=_.reduce((e,t)=>e+t.quantity,0),ey=_.reduce((e,t)=>e+(0,v.Mc)(t),0);if(q&&!b&&!t)return(0,a.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center fixed inset-0",children:(0,a.jsx)("img",{src:"https://media.giphy.com/media/YRsgRsRSqyjCLhWTRM/giphy.gif",alt:"Carregando...",className:"w-64 h-64 object-contain"})});if(!b)return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20",children:[(0,a.jsx)(o.Z,{}),(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[60vh] px-4",children:(0,a.jsxs)("div",{className:"text-center max-w-md",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Restaurante n\xe3o encontrado"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"O restaurante que voc\xea est\xe1 procurando n\xe3o existe."}),(0,a.jsx)(d.Z,{onClick:()=>N.push("/"),children:"Voltar para home"})]})}),(0,a.jsx)(c.Z,{})]});let ev=em?{name:em.name||b.name,description:em.description||b.description,coverImage:em.coverImage||b.coverImage,profileImage:em.profileImage||b.profileImage,city:em.city||b.city}:b,ew=(null==em?void 0:em.city)||V||(null==H?void 0:H.city)||"",eC=ev.name;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",style:{paddingBottom:"calc(70px + env(safe-area-inset-bottom, 0))"},children:[(0,a.jsx)(o.Z,{restaurantName:eC,showCart:!0,cartItemsCount:ex,cartTotal:ey,onCartClick:()=>M(!0),addressCity:ew||void 0}),(0,a.jsxs)("div",{className:"relative w-full h-48",children:[ev.coverImage?(0,a.jsx)("img",{src:ev.coverImage,alt:ev.name,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full bg-gradient-to-b from-purple-600 to-purple-500"}),(0,a.jsxs)("div",{className:"absolute top-0 left-0 right-0 px-4 pt-12 pb-4 flex items-center justify-between z-10",children:[(0,a.jsx)("button",{onClick:()=>N.push("/"),className:"w-10 h-10 rounded-full bg-black/30 backdrop-blur-sm flex items-center justify-center",children:(0,a.jsx)(u.Z,{size:20,className:"text-white"})}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{className:"w-10 h-10 rounded-full bg-black/30 backdrop-blur-sm flex items-center justify-center",children:(0,a.jsx)(m.Z,{size:20,className:"text-white"})}),(0,a.jsx)("button",{className:"w-10 h-10 rounded-full bg-black/30 backdrop-blur-sm flex items-center justify-center",children:(0,a.jsx)(f.Z,{size:20,className:"text-white"})})]})]})]}),(0,a.jsxs)("div",{className:"px-4 -mt-20 relative z-10 pb-4","data-restaurant-info":!0,children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-4 mb-4",children:[ev.profileImage&&(0,a.jsx)("div",{className:"flex justify-center -mt-12 mb-4",children:(0,a.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-white shadow-xl",children:(0,a.jsx)("img",{src:ev.profileImage,alt:ev.name,className:"w-full h-full object-cover"})})}),(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-center relative",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("h1",{className:"font-bold text-gray-900 text-center",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontSize:"18px",fontWeight:700,textAlign:"center"},children:eC||ev.name||"Restaurante"}),ew&&(0,a.jsxs)("span",{className:"text-gray-500",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontSize:"18px",fontWeight:400},children:["(",ew,")"]}),(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg",className:"flex-shrink-0",children:(0,a.jsx)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,a.jsxs)("g",{transform:"translate(-2.000000, -2.000000)",fillRule:"nonzero",children:[(0,a.jsx)("path",{d:"M35.0319034,21.8172388 L30.3004748,26.4389531 C30.1634843,26.5724326 30.1007001,26.7646292 30.1324748,26.9532388 L31.2501891,33.4812388 C31.2883139,33.6997008 31.1991628,33.920871 31.0201928,34.0518247 C30.8412227,34.1827784 30.6034445,34.2008248 30.4067606,34.0983816 L24.5576177,31.0126673 C24.3880153,30.9236574 24.1855058,30.9236574 24.0159034,31.0126673 L18.1667606,34.0983816 C17.9700766,34.2008248 17.7322984,34.1827784 17.5533283,34.0518247 C17.3743583,33.920871 17.2852072,33.6997008 17.323332,33.4812388 L18.4410463,26.9532388 C18.472821,26.7646292 18.4100369,26.5724326 18.2730463,26.4389531 L13.5416177,21.8172388 C13.3827107,21.6624873 13.3254129,21.430954 13.3938066,21.2199522 C13.4622003,21.0089504 13.6444295,20.8550569 13.8639034,20.8229531 L20.4021891,19.8698102 C20.592266,19.8427933 20.7566192,19.7233804 20.8410463,19.5509531 L23.7656177,13.6126673 C23.8644206,13.4154028 24.0661358,13.2908324 24.2867606,13.2908324 C24.5073853,13.2908324 24.7091005,13.4154028 24.8079034,13.6126673 L27.7324748,19.5509531 C27.8181891,19.7223816 27.979332,19.8423816 28.171332,19.8698102 L34.7096177,20.8229531 C34.9290916,20.8550569 35.1113208,21.0089504 35.1797145,21.2199522 C35.2481082,21.430954 35.1908104,21.6624873 35.0319034,21.8172388 M45.9690463,22.0915245 L45.9690463,22.0778102 C44.3130463,19.1326673 43.9187606,18.8755245 43.9187606,18.1349531 L43.9187606,15.3372388 C43.9187606,11.8298102 40.3907606,11.0069531 39.163332,10.0366673 C38.5050463,9.63552448 38.5599034,9.30981019 37.0444748,6.84466734 C35.2547606,3.84809591 31.8501891,4.89038162 30.4581891,4.68466734 C29.6936177,4.68466734 29.4467606,4.27323876 26.4947606,2.61723876 C22.7096177,0.450381622 20.083332,4.68466734 18.115332,4.68466734 L15.3141891,4.68466734 C11.8170463,4.68466734 10.9701891,8.21609591 10.027332,9.42295305 C9.67418912,10.0400959 9.24904627,10.0675245 6.81476055,11.5589531 C3.75304627,13.3966673 4.84676055,16.8595245 4.65476055,18.1349531 C4.65476055,19.9658102 0.475331982,22.9143816 2.60447484,26.5143816 C5.53247484,31.7189531 4.38733198,28.6400959 4.65476055,33.2686673 C4.65476055,37.2800959 9.27647484,37.7600959 10.0136177,39.1692388 C11.011332,40.4412388 11.7896177,43.9212388 15.3039034,43.9212388 C17.899332,43.9898102 18.2387606,43.7738102 18.9519034,44.1406673 C21.7941891,45.7315245 22.2707606,46.3452388 23.6387606,46.5235245 C25.8261891,46.7978102 26.563332,45.8549531 29.6216177,44.1578102 C30.2936177,43.7738102 30.6090463,43.9932388 33.2696177,43.9212388 C37.315332,43.9212388 37.699332,39.3886673 39.1496177,38.5795245 C40.4079034,37.5818102 43.915332,36.7726673 43.915332,33.2652388 C43.9839034,30.6252388 43.7679034,30.3098102 44.1519034,29.6378102 L45.9690463,26.5178102 C46.7747606,25.1600959 46.7747606,23.4629531 45.9690463,22.0949531",fill:"#E11D48"}),(0,a.jsx)("rect",{x:"0",y:"0",width:"48",height:"48"})]})})})]}),(0,a.jsx)(h.Z,{size:18,className:"text-gray-400 absolute right-0"})]})}),(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-gray-700",children:[(0,a.jsx)("span",{className:"text-green-600 font-medium",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontSize:"12px",fontWeight:500},children:"Entrega rastre\xe1vel"}),(0,a.jsx)("span",{className:"text-gray-300",children:"•"}),(0,a.jsx)("span",{style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontSize:"12px",fontWeight:400},children:"1.1 km"}),(0,a.jsx)("span",{className:"text-gray-300",children:"•"}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full bg-gray-300 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontSize:"10px",fontWeight:700,color:"#ffffff"},children:"$"})}),(0,a.jsx)("span",{style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontSize:"12px",fontWeight:400,color:"#9CA3AF"},children:"Pedido m\xednimo R$ 15,00"})]})]})}),(0,a.jsx)("div",{className:"border-t border-gray-100 mb-3"}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(x.Z,{className:"w-[10px] h-[10px] text-yellow-500 fill-yellow-500"}),(0,a.jsx)("span",{className:"font-semibold text-yellow-500",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontSize:"12px",fontWeight:600},children:"4,8"}),(0,a.jsx)("span",{className:"text-gray-500",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontSize:"12px",fontWeight:400},children:"(626 avalia\xe7\xf5es)"})]}),(0,a.jsx)(h.Z,{size:18,className:"text-gray-400"})]}),(0,a.jsx)("div",{className:"border-t border-gray-100 mb-3"}),(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-gray-700",children:[(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-gray-600",children:[(0,a.jsx)("g",{clipPath:"url(#clip-bike)",children:(0,a.jsx)("path",{d:"M18.05 4.83H15.13C14.91 3.24 13.55 2 11.9 2C10.25 2 8.89 3.24 8.67 4.83H5.75C5.34 4.83 5 5.17 5 5.58C5 5.99 5.34 6.33 5.75 6.33H8.81C8.98 6.8 9.23 7.22 9.57 7.57C7.67 8.45 6.34 10.38 6.34 12.61V16.4C6.34 17.38 7.14 18.18 8.12 18.18H9.23V19.33C9.23 20.8 10.43 22 11.9 22C13.37 22 14.57 20.8 14.57 19.33V18.18H15.68C16.66 18.18 17.46 17.38 17.46 16.4C17.46 15.99 17.12 15.65 16.71 15.65C16.3 15.65 15.96 15.99 15.96 16.4C15.96 16.55 15.84 16.68 15.68 16.68H14.57V15.48C14.57 14.01 13.37 12.81 11.9 12.81C10.43 12.81 9.23 14 9.23 15.48V16.68H8.11C7.96 16.68 7.83 16.56 7.83 16.4V12.61C7.83 10.37 9.65 8.55 11.89 8.55C14.13 8.55 15.95 10.37 15.95 12.61V13.28C15.95 13.69 16.29 14.03 16.7 14.03C17.11 14.03 17.45 13.69 17.45 13.28V12.61C17.45 10.38 16.12 8.45 14.22 7.57C14.57 7.22 14.83 6.8 14.99 6.33H18.05C18.46 6.33 18.8 5.99 18.8 5.58C18.8 5.17 18.46 4.83 18.05 4.83ZM10.73 15.48C10.73 14.83 11.26 14.31 11.9 14.31C12.54 14.31 13.07 14.84 13.07 15.48V19.33C13.07 19.98 12.54 20.5 11.9 20.5C11.26 20.5 10.73 19.97 10.73 19.33V15.48ZM11.9 3.5C12.88 3.5 13.67 4.3 13.67 5.28C13.67 6.26 12.88 7.05 11.9 7.05C10.92 7.05 10.13 6.25 10.13 5.28C10.13 4.31 10.92 3.5 11.9 3.5Z",fill:"currentColor"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip-bike",children:(0,a.jsx)("rect",{width:"13.8",height:"20",fill:"white",transform:"translate(5 2)"})})})]}),(0,a.jsx)("span",{style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontSize:"12px",fontWeight:400},children:"Padr\xe3o"}),(0,a.jsx)("span",{className:"text-gray-300",children:"•"}),(0,a.jsx)("span",{style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontSize:"12px",fontWeight:400},children:"26-36 min"}),(0,a.jsx)("span",{className:"text-gray-300",children:"•"}),(0,a.jsx)("span",{className:"text-green-600 font-medium",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontSize:"12px",fontWeight:500},children:"Gr\xe1tis"})]})}),(0,a.jsx)("p",{className:"text-gray-500",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontSize:"12px",fontWeight:400},children:"Mais op\xe7\xf5es dispon\xedveis na sacola"})]}),E.length>0&&(0,a.jsx)("div",{"data-carousel-menu":!0,style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',transition:"all 0.2s ease-out"},children:(0,a.jsx)("div",{className:"flex gap-6 overflow-x-auto px-4 py-3 border-b border-gray-200 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:E.map(e=>(0,a.jsxs)("button",{onClick:()=>{let t=document.querySelector('[data-menu-section="'.concat(e.id,'"]'));if(t){let e=ed?100:0,r=t.getBoundingClientRect().top+window.pageYOffset+e;window.scrollTo({top:r,behavior:"smooth"})}},className:"flex-shrink-0 relative pb-2 transition-all whitespace-nowrap",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontWeight:R===e.id?700:400,fontSize:"14px",color:R===e.id?"#EF4444":"#6B7280"},children:[e.name,R===e.id&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary",style:{backgroundColor:"#EF4444"}})]},e.id))})}),Z?(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[1,2,3,4].map(e=>(0,a.jsx)("div",{className:"bg-gray-100 rounded-lg h-48 animate-pulse"},e))})}):T.length>0?(0,a.jsx)("div",{className:"mt-4 mb-0",children:T.map((e,t)=>(0,a.jsxs)("div",{"data-menu-section":e.menuId,className:t>0?"mt-8":"",children:[(0,a.jsx)("div",{className:"px-4 mb-2",children:(0,a.jsx)("h2",{className:"text-base font-bold text-gray-900",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontWeight:700},children:e.menuName})}),(0,a.jsx)("div",{className:"bg-white",children:e.products.map((t,r)=>(r<3&&console.warn("\uD83C\uDFA8 [Vitrine-Render] Menu ".concat(e.menuName,", Produto ").concat(r,":"),t.name,"ID:",t.id),(0,a.jsx)(s.Z,{product:t,onAddToCart:eh,onRemoveFromCart:eg,quantity:ep(t.id),restaurantSlug:j,showDivider:r<e.products.length-1},t.id)))})]},e.menuId))}):(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Nenhum produto dispon\xedvel. Cadastre um card\xe1pio primeiro."})})]}),(0,a.jsx)(l.Z,{items:_,isOpen:z,onClose:()=>M(!1),onUpdateQuantity:(e,t)=>{if(t<=0){eg(e);return}L(a=>{let i=a.map(r=>r.product.id===e?{...r,quantity:t}:r);return b&&Promise.resolve().then(r.bind(r,6414)).then(e=>{let{saveCartToStorage:t}=e;t("cart_".concat(b.id),i)}),i})},onRemoveItem:eg}),(null==H?void 0:H.city)&&K&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 z-[80] animate-fadeIn transition-opacity duration-300"}),(0,a.jsx)("div",{className:"fixed inset-0 z-[90] flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-4 space-y-4 animate-scaleIn transition-all duration-300 ease-out",onClick:e=>e.stopPropagation(),style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif'},children:["searching"===Q&&(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3 py-2",children:[(0,a.jsx)(g.Z,{className:"w-8 h-8 animate-spin text-primary"}),(0,a.jsx)("p",{className:"text-sm font-semibold text-gray-900 text-center",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontWeight:600},children:"Estamos procurando a unidade mais pr\xf3xima da sua cidade..."}),(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontWeight:400},children:"Isso pode levar alguns segundos."})]}),"found"===Q&&(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3 py-2",children:[(0,a.jsx)(p.Z,{className:"w-8 h-8 text-emerald-500"}),(0,a.jsxs)("p",{className:"text-sm font-semibold text-gray-900 text-center",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontWeight:600},children:["Encontramos a unidade em ",ew||H.city,"!"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontWeight:400},children:"Vamos mostrar os produtos e a entrega para a sua regi\xe3o."})]}),!Q&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"mt-0.5",children:(0,a.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 49 48",xmlns:"http://www.w3.org/2000/svg",className:"flex-shrink-0",children:(0,a.jsx)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,a.jsx)("g",{transform:"translate(-431.000000, -240.000000)",fillRule:"nonzero",children:(0,a.jsx)("g",{transform:"translate(48.000000, 171.000000)",children:(0,a.jsxs)("g",{transform:"translate(383.000000, 69.000000)",children:[(0,a.jsx)("path",{d:"M40,21 C40,12.7157288 33.2842712,6 25,6 C16.7157288,6 10,12.7157288 10,21 C10,27.4044925 14.8794903,34.2357807 25,41.3612474 C35.1205097,34.2357807 40,27.4044925 40,21 Z M25,45 C13,36.9607503 7,28.9607503 7,21 C7,11.0588745 15.0588745,3 25,3 C34.9411255,3 43,11.0588745 43,21 C43,28.9607503 37,36.9607503 25,45 Z",fill:"#EA1D2C"}),(0,a.jsx)("path",{d:"M25,26 C27.7614237,26 30,23.7614237 30,21 C30,18.2385763 27.7614237,16 25,16 C22.2385763,16 20,18.2385763 20,21 C20,23.7614237 22.2385763,26 25,26 Z M25,29 C20.581722,29 17,25.418278 17,21 C17,16.581722 20.581722,13 25,13 C29.418278,13 33,16.581722 33,21 C33,25.418278 29.418278,29 25,29 Z",fill:"#EA1D2C"})]})})})})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"text-sm font-semibold text-gray-900",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontWeight:600},children:["Voc\xea est\xe1 em ",(0,a.jsxs)("span",{className:"text-primary",children:[H.city," - ",H.state]}),"?"]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontWeight:400},children:"Usamos sua localiza\xe7\xe3o para mostrar restaurantes e entrega corretos."})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-1",children:[(0,a.jsx)("button",{onClick:()=>{Y(!1),(null==b?void 0:b.slug)?N.push("/delivery?restaurant=".concat(b.slug)):N.push("/delivery")},className:"flex-1 py-2 text-xs font-medium text-gray-700 border border-gray-200 rounded-full hover:bg-gray-50 transition-colors",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontWeight:500},children:"N\xe3o, mudar endere\xe7o"}),(0,a.jsx)("button",{onClick:()=>{let e=(null==H?void 0:H.city)||V;if(!e){Y(!1);return}U(e);try{let t=localStorage.getItem("deliveryAddress"),r=t?JSON.parse(t):{},a={...r,city:e,state:(null==H?void 0:H.state)||r.state};localStorage.setItem("deliveryAddress",JSON.stringify(a)),j&&localStorage.setItem("locationConfirmed_".concat(j),"true")}catch(e){}G("searching"),Y(!0),setTimeout(()=>{G("found"),setTimeout(()=>{Y(!1),G(null)},1e3)},1500)},className:"flex-1 py-2 text-xs font-semibold text-white bg-primary rounded-full hover:bg-primary/90 transition-colors",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontWeight:600},children:"Sim, estou aqui"})]})]})]})})]}),$&&ee>0&&(0,a.jsx)("div",{onClick:()=>{let e=null==b?void 0:b.slug;e?N.push("/pix?restaurant=".concat(e)):N.push("/pix")},className:"fixed left-0 right-0 mx-4 bg-primary rounded-xl p-3 cursor-pointer hover:bg-primary/90 transition-all shadow-lg z-[60] animate-fadeIn",style:{bottom:"calc(70px + env(safe-area-inset-bottom, 0px) + 8px)"},children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",fill:"white"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("p",{className:"font-semibold text-white truncate",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontSize:"14px",fontWeight:600},children:["Pedido #",$.number," pendente"]}),(0,a.jsx)("p",{className:"text-white/80",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontSize:"12px",fontWeight:400},children:"Complete o pagamento PIX"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-white",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M12 6v6l4 2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),(0,a.jsxs)("span",{className:"font-bold text-white",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontSize:"12px",fontWeight:700},children:[Math.floor(ee/60),":",(ee%60).toString().padStart(2,"0")]})]}),(0,a.jsx)("p",{className:"text-white/70 mt-0.5",style:{fontFamily:'"iFood RC Textos", helvetica, sans-serif',fontSize:"10px",fontWeight:400},children:"expira em"})]}),(0,a.jsx)(h.Z,{size:18,className:"text-white/80 flex-shrink-0"})]})]})}),(0,a.jsx)(c.Z,{})]})}},6414:function(e,t,r){"use strict";function a(e){var t;return{id:e.id,name:e.name,price:e.price,restaurantId:e.restaurantId,fromPrice:e.fromPrice,options:null===(t=e.options)||void 0===t?void 0:t.map(e=>({id:e.id,price:e.price}))}}function i(e,t){var r;return{product:t||{id:e.product.id,name:e.product.name,price:e.product.price,restaurantId:e.product.restaurantId,fromPrice:e.product.fromPrice,options:null===(r=e.product.options)||void 0===r?void 0:r.map(e=>({id:e.id,name:"",price:e.price,description:"",available:!0})),description:"",image:"",category:"",available:!0,createdAt:new Date,updatedAt:new Date},quantity:e.quantity,selectedOptions:e.selectedOptions}}function n(e,t){let r=t.length>50?t.slice(-50):t;try{let t=r.map(e=>({product:a(e.product),quantity:e.quantity,selectedOptions:e.selectedOptions})),i=JSON.stringify(t);if(i.length>512e3){console.warn("Cart data is too large:",i.length,"bytes. Limiting items...");let t=r.slice(-20).map(e=>({product:a(e.product),quantity:e.quantity,selectedOptions:e.selectedOptions})),n=JSON.stringify(t);if(n.length>512e3){let t=r.slice(-10).map(e=>({product:a(e.product),quantity:e.quantity,selectedOptions:e.selectedOptions}));return localStorage.setItem(e,JSON.stringify(t)),!0}return localStorage.setItem(e,n),!0}return localStorage.setItem(e,i),!0}catch(t){if("QuotaExceededError"===t.name){console.error("localStorage quota exceeded. Cleaning old cache..."),function(){try{Date.now();let e=[],t=localStorage.getItem("currentCartKey")||"";for(let r=0;r<localStorage.length;r++){let a=localStorage.key(r);a&&(a.startsWith("cache_")&&e.push(a),(a.startsWith("tracking_")||a.startsWith("pixCode_")||a.startsWith("pixQrCode_"))&&e.push(a),a.startsWith("cart_")&&a!==t&&e.push(a),"cartItems"===a&&e.push(a))}e.forEach(e=>{try{localStorage.removeItem(e)}catch(e){}}),console.log("Cache cleaned successfully. Removed ".concat(e.length," entries."))}catch(e){console.error("Error cleaning cache:",e)}}();try{let t=r.slice(-20).map(e=>({product:a(e.product),quantity:e.quantity,selectedOptions:e.selectedOptions}));return localStorage.setItem(e,JSON.stringify(t)),!0}catch(i){console.error("Failed to save cart even after cleaning cache:",i);let t=r.slice(-10).map(e=>({product:a(e.product),quantity:e.quantity,selectedOptions:e.selectedOptions}));try{return localStorage.setItem(e,JSON.stringify(t)),!0}catch(e){return console.error("Failed to save even limited cart:",e),!1}}}return console.error("Error saving cart:",t),!1}}async function o(e,t){return n(e,t)}function s(e){try{let t=localStorage.getItem(e);if(!t)return[];return JSON.parse(t)}catch(e){return console.error("Error loading cart:",e),[]}}function l(){let e=0;for(let t=0;t<localStorage.length;t++){let r=localStorage.key(t);if(r){let t=localStorage.getItem(r)||"";e+=r.length+t.length}}let t=e/5242880*100;return{used:e,available:5242880,percentage:t}}r.r(t),r.d(t,{expandCartItem:function(){return i},getStorageUsage:function(){return l},loadCartFromStorage:function(){return s},saveCartToStorage:function(){return n},saveCartToStorageAsync:function(){return o}})},6338:function(e,t,r){"use strict";function a(){try{let e=["isLoggedIn","currentUser","restaurant","tracking_session_id","deliveryAddress","selectedShippingId","selectedShippingName","selectedShippingValue","deliveryOption","paymentMethod","currentOrderId","currentOrderNumber","currentOrderStage","currentOrderStageTime"],t=Object.keys(localStorage),r=Date.now();t.forEach(t=>{if(!e.includes(t)){if(t.startsWith("cache_"))try{let e=localStorage.getItem(t);if(e){let a=JSON.parse(e);a.timestamp&&r-a.timestamp>3e5&&localStorage.removeItem(t)}}catch(e){localStorage.removeItem(t)}if(t.startsWith("orders_")||t.startsWith("products_")||t.startsWith("menus_")){let e=localStorage.getItem("restaurant");if(e)try{let r=JSON.parse(e);t.includes(r.id)||localStorage.removeItem(t)}catch(e){localStorage.removeItem(t)}else localStorage.removeItem(t)}}});let a=0;t.forEach(e=>{try{let t=localStorage.getItem(e);t&&(a+=t.length)}catch(e){}}),a>4194304&&t.forEach(t=>{if(!e.includes(t)&&!t.startsWith("cart_"))try{localStorage.removeItem(t)}catch(e){}})}catch(e){console.error("Erro ao limpar localStorage:",e)}}function i(e){let t={id:e.id,name:e.name,slug:e.slug,description:e.description||"",address:e.address||"",city:e.city||"",coverImage:e.coverImage||"",profileImage:e.profileImage||""};return delete t.menus,delete t.products,delete t.orders,delete t.shippings,delete t.trackingEvents,delete t.menuProducts,delete t.user,delete t.usersLastUsed,t}function n(e){try{a();let t={id:e.id,slug:e.slug,name:e.name,description:e.description||"",city:e.city||"",coverImage:e.coverImage||"",profileImage:e.profileImage||""},r=JSON.stringify(t);if(r.length>5120){let t={id:e.id,slug:e.slug,name:e.name};return localStorage.setItem("restaurant",JSON.stringify(t)),!0}return localStorage.setItem("restaurant",r),!0}catch(t){if("QuotaExceededError"===t.name){console.warn("⚠️ Quota excedida, limpando localStorage..."),a();try{let t={id:e.id,slug:e.slug,name:e.name};return localStorage.setItem("restaurant",JSON.stringify(t)),console.log("✅ Restaurante salvo com dados m\xednimos ap\xf3s limpar cache"),!0}catch(e){return console.error("❌ Falhou ao salvar restaurante mesmo ap\xf3s limpar cache:",e),!1}}return console.error("Erro ao salvar restaurante:",t),!1}}r.r(t),r.d(t,{cleanupLocalStorage:function(){return a},minimizeRestaurant:function(){return i},safeSetRestaurant:function(){return n}})},7164:function(e,t,r){"use strict";async function a(e,t,r,a){try{let i;let n=((i=localStorage.getItem("tracking_session_id"))||(i="session_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9)),localStorage.setItem("tracking_session_id",i)),i),o=navigator.userAgent,s="Unknown",l="Unknown",c="Desktop";o.indexOf("Firefox")>-1?s="Firefox":o.indexOf("Chrome")>-1&&-1===o.indexOf("Edg")?s="Chrome":o.indexOf("Safari")>-1&&-1===o.indexOf("Chrome")?s="Safari":o.indexOf("Edg")>-1&&(s="Edge"),o.indexOf("Win")>-1?l="Windows":o.indexOf("Mac")>-1?l="macOS":o.indexOf("Linux")>-1?l="Linux":o.indexOf("Android")>-1?l="Android":(o.indexOf("iOS")>-1||o.indexOf("iPhone")>-1)&&(l="iOS"),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(o)?c="Mobile":/Tablet|iPad/i.test(o)&&(c="Tablet"),await fetch("/api/tracking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({restaurantId:e,sessionId:n,eventType:t,page:r||window.location.pathname,metadata:a?JSON.stringify(a):null,userAgent:o,browser:s,os:l,device:c})})}catch(e){console.error("Error tracking event:",e)}}function i(e,t){a(e,"page_view",t)}function n(e,t,r){a(e,"product_view",window.location.pathname,{productId:t,productName:r})}function o(e,t,i,n,o){a(e,"add_to_cart",window.location.pathname,{productId:t,productName:i,cartItems:n,cartValue:o}),r.e(768).then(r.bind(r,3768)).then(e=>{let{trackAddToCart:r}=e;r(o,"BRL",[t])}).catch(()=>{})}function s(e,t,r){a(e,"checkout_start","/checkout",{cartItems:t,cartValue:r})}function l(e,t,r){a(e,"payment_start","/payment",{paymentMethod:t,total:r})}function c(e,t,r,i){a(e,"payment_pix_copied","/pix",{orderId:t,orderNumber:r,total:i})}function d(e,t,r,i){a(e,"payment_complete","/order-success",{orderId:t,orderNumber:r,total:i})}r.d(t,{A0:function(){return n},Kc:function(){return o},Kx:function(){return s},Uj:function(){return l},Z0:function(){return i},tg:function(){return d},trackEvent:function(){return a},y3:function(){return c}})}},function(e){e.O(0,[456,446,628,13,971,117,744],function(){return e(e.s=6337)}),_N_E=e.O()}]);